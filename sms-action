#!rsc
# RouterOS script: sms-action
# Copyright (c) 2018-2019 Christian Hesse <mail@eworm.de>
#
# run action on received SMS

:global SmsAction;

:local Action $action;

:if ([ :typeof $Action ] = "nothing") do={
  :log error "This script is supposed to run from SMS hook with action=...";
  :error "Error: See log for details.";
}

:local Code ($SmsAction->$Action);
:local Parsed [ :parse $Code ];

:log info ("Acting on SMS action '" . $Action . "': " . $Code);
:delay 1s;
$Parsed;
